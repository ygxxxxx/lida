<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>李达的奇妙世界</title>
    <style>
        @keyframes neon {
            0%, 100% {
                text-shadow: 0 0 10px #fff, 0 0 20px #fff, 0 0 30px #fff, 0 0 40px #FF1177, 0 0 70px #FF1177, 0 0 80px #FF1177, 0 0 100px #FF1177, 0 0 150px #FF1177;
            }
            50% {
                text-shadow: 0 0 5px #fff, 0 0 10px #fff, 0 0 15px #fff, 0 0 20px #FF1177, 0 0 35px #FF1177, 0 0 40px #FF1177, 0 0 50px #FF1177, 0 0 75px #FF1177;
            }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        /* 添加新的动画效果 */
        @keyframes colorChange {
            0% { color: #FF1177; }
            25% { color: #3498db; }
            50% { color: #2ecc71; }
            75% { color: #f1c40f; }
            100% { color: #FF1177; }
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-30px); }
            60% { transform: translateY(-15px); }
        }

        /* 修改现有样式并添加新样式 */
        body {
            background: linear-gradient(45deg, #1a1a1a, #2c2c2c);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            color: #fff;
            font-family: 'Arial', sans-serif;
            overflow-x: hidden;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        #neon-title {
            font-size: 3.5em;
            text-align: center;
            animation: neon 1.5s ease-in-out infinite alternate, colorChange 10s infinite;
            letter-spacing: 3px;
            text-transform: uppercase;
        }

        #avatar {
            width: 200px;
            height: 200px;
            margin: 0 auto;
            background-image: url('./images/0169b92a204944cfa46238a1a09d6166_0.webp');
            background-size: cover;
            border-radius: 50%;
            animation: float 3s ease-in-out infinite, bounce 5s infinite;
        }

        section {
            margin: 2em 0;
            padding: 1em;
            backdrop-filter: blur(10px);
            background-color: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        section:hover {
            transform: scale(1.05) rotate(0deg);
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
        }

        #chat-container {
            width: 100%;
            max-width: 600px;
            height: 400px;
            background-color: #2c2c2c;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.1);
            margin: 2em auto;
            border: 2px solid #FF1177;
            transition: all 0.3s ease;
        }

        #chat-container:hover {
            box-shadow: 0 0 20px #FF1177;
        }

        #chat-messages {
            height: 320px;
            overflow-y: auto;
            padding: 10px;
        }

        .message {
            margin-bottom: 10px;
            padding: 5px 10px;
            border-radius: 5px;
            max-width: 80%;
        }

        .user-message {
            background-color: #4a4a4a;
            align-self: flex-end;
            margin-left: auto;
        }

        .bot-message {
            background-color: #3a3a3a;
            align-self: flex-start;
        }

        #chat-input {
            display: flex;
            padding: 10px;
        }

        #user-input {
            flex-grow: 1;
            padding: 5px;
            border: none;
            border-radius: 3px;
            background-color: #3a3a3a;
            color: #fff;
        }

        #send-button {
            margin-left: 5px;
            padding: 5px 10px;
            border: none;
            border-radius: 3px;
            background-color: #FF1177;
            color: #fff;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        #send-button:hover {
            background-color: #ff4da6;
            transform: scale(1.1);
        }

        /* 修改 .media-container 样式 */
        .media-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }

        /* 添加新的样式 */
        .media-item {
            width: 320px;
            height: 240px;
            object-fit: cover;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }

        .media-item:hover {
            transform: scale(1.1);
            box-shadow: 0 0 25px rgba(255, 255, 255, 0.5);
        }

        @media (max-width: 768px) {
            .media-item {
                width: 100%;
                height: auto;
            }
        }

        h2 {
            position: relative;
            display: inline-block;
        }

        h2::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 2px;
            bottom: -5px;
            left: 0;
            background-color: #FF1177;
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        section:hover h2::after {
            transform: scaleX(1);
        }

        /* 添加滚动条样式 */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: #2c2c2c;
        }

        ::-webkit-scrollbar-thumb {
            background: #FF1177;
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #ff4da6;
        }
    </style>
</head>
<body>
    <header>
        <h1 id="neon-title">欢迎来到李达的奇妙世界!</h1>
    </header>

    <main>
        <section id="avatar">
            <!-- 头像将通过CSS背景图片显示 -->
        </section>

        <section id="intro">
            <h2>不太靠谱的个人介绍</h2>
            <div class="intro-text">
                <p>李达，这个名字在我们宿舍里已经成为了一个传奇。他是一个奇特的存在，就像是从某个平行宇宙穿越而来的异类。让我来为你描绘一下这位不可思议的舍友吧。</p>

                <p>首先，李达的身高堪比电线杆。当他站直身体时，我们都不得不仰视他，就像在观察一座活动的摩天大楼。有时候，我们甚至怀疑他是不是每天晚上都偷偷地往自己的腿上安装伸缩装置。但是，别被他的高大身材吓到，因为李达的性格温和得像一只巨型泰迪熊。他走路轻手轻脚，生怕踩死地上的蚂蚁；说话细声细气，仿佛害怕吓到空气中的尘埃。</p>

                <p>然而，李达最与众不同的特点，莫过于他对"偷学"的执着追求。没错，你没听错，是"偷学"，不是"偷懒"。李达坚信，知识就像是别人的内裤，只有偷来的才是最香的。他潜伏在图书馆的角落，竖起超人般的听力，偷听别人的讨论；他躲在教学楼的走廊，用望远镜偷看其他班级的黑板；他甚至研发了一种特殊的眼镜，可以透视别人的书本，直接阅读内容。李达的"偷学"技能已经达到了出神入化的境界，我们都怀疑他是不是曾经拜师于某个隐世的忍者大师。</p>

                <!-- 为了节省空间，这里省略了一些段落。您可以根据需要添加更多段落 --></p>

                <p>总之，李达的存在证明了一个真理：这个世界上，没有什么是不可能的。只要你够奇特，够执着，你就能成为一个活生生的传奇，成为别人口中津津乐道的话题。或许，这就是李达给我们上的最宝贵的一课。</p>

                <p>在我们与李达共同生活的日子里，我们学会了接受差异，欣赏独特，也学会了用幽默的眼光看待生活。谁知道呢，也许有一天，我们每个人都能像李达一样，无所顾忌地展现自己最真实、最奇特的一面。毕竟，在这个世界上，还有什么比做自己更酷的事情呢？</p>
            </div>
        </section>

        <!-- 修改生活照部分 -->
        <section id="life-photos">
            <h2>达哥的精彩生活</h2>
            <div class="media-container">
                <img src="./images/52dfe2e9738fdaa9c75b828d4492067a_720.jpg" alt="李达的生活照1" class="media-item">
                <img src="./images/9f526e366d77445162ba44a3ad06353d_720.jpg" alt="李达的生活照2" class="media-item">
                <video controls class="media-item">
                    <source src="./images/5cc7800e31cb20058503714eefd6f940.mp4" type="video/mp4">
                    您的浏览器不支持 video 标签。
                </video>
                <video controls class="media-item">
                    <source src="./images/cf563508142c6506490318fa5dd2afa3.mp4" type="video/mp4">
                    您的浏览器不支持 video 标签。
                </video>
            </div>
        </section>

        <section id="achievements">
            <h2>惊人的成就列表</h2>
            <!-- 这里将添加虚构的成就列表 -->
        </section>

        <section id="stats">
            <h2>搞笑的个人统计</h2>
            <ul>
                <li>偷学次数：天天偷学</li>

                <!-- 添加更多搞笑统计 -->
            </ul>
        </section>

        <!-- 添加聊天窗口 -->
        <section id="chat-section">
            <h2>与李达聊天</h2>
            <div id="chat-container">
                <div id="chat-messages"></div>
                <div id="chat-input">
                    <input type="text" id="user-input" placeholder="和李达聊天...">
                    <button id="send-button">发送</button>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p>© 2024 李达的奇妙世界 - 所有内容纯属虚构，如有雷同纯属巧合</p>
    </footer>

    <script>
        const apiUrl = 'https://cors-anywhere.herokuapp.com/https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions';

        document.addEventListener('DOMContentLoaded', function() {
            const chatMessages = document.getElementById('chat-messages');
            const userInput = document.getElementById('user-input');
            const sendButton = document.getElementById('send-button');

            console.log('Elements:', { chatMessages, userInput, sendButton });

            async function getBotResponse(userMessage) {
                try {
                    console.log('Sending request to API...');
                    const response = await fetch('https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': 'Bearer sk-a359f1ef36cc4ee08e579950786a5976'
                        },
                        body: JSON.stringify({
                            model: "qwen2.5-72b-instruct",
                            input: {
                                messages: [
                                    {role: "system", content: "你是李达，一个宇宙无敌超级无聊的男生。你喜欢熬夜打游戏，起床很困难。请以李达的身份回答问题，保持幽默和夸张的风格。"},
                                    {role: "user", content: userMessage}
                                ]
                            },
                            parameters: {}
                        })
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const data = await response.json();
                    console.log('API response:', data);
                    return data.output.text;
                } catch (error) {
                    console.error('Error in API call:', error);
                    return "抱歉，李达现在可能在打游戏，暂时无法回复。错误信息：" + error.message;
                }
            }

            function addMessage(content, isUser) {
                const messageDiv = document.createElement('div');
                messageDiv.classList.add('message');
                messageDiv.classList.add(isUser ? 'user-message' : 'bot-message');
                messageDiv.textContent = content;
                chatMessages.appendChild(messageDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }

            async function handleSendMessage() {
                console.log('Send button clicked');
                const userMessage = userInput.value.trim();
                if (userMessage) {
                    console.log('User message:', userMessage);
                    addMessage(userMessage, true);
                    userInput.value = '';
                    addMessage("李达正在思考中...", false);
                    try {
                        const botResponse = await getBotResponse(userMessage);
                        console.log('Bot response:', botResponse);
                        chatMessages.removeChild(chatMessages.lastChild); // 移除"思考中"的消息
                        addMessage(botResponse, false);
                    } catch (error) {
                        console.error('Error in getting bot response:', error);
                        chatMessages.removeChild(chatMessages.lastChild); // 移除"思考中"的消息
                        addMessage("抱歉，发生了一些错误。李达可能睡着了。", false);
                    }
                }
            }

            sendButton.addEventListener('click', handleSendMessage);
            console.log('Click event listener added to send button');

            userInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    handleSendMessage();
                }
            });
            console.log('Keypress event listener added to user input');

            // 其他部分的脚本保持不变
            document.querySelectorAll('section:not(#chat-section)').forEach(section => {
                section.addEventListener('mouseover', () => {
                    section.style.transform = 'scale(1.05) rotate(2deg)';
                });
                section.addEventListener('mouseout', () => {
                    section.style.transform = 'scale(1) rotate(0deg)';
                });
            });
        });
    </script>
    <!-- 在 </body> 标签之前添加以下内容 -->
    <div id="particles-js" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;"></div>
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script>
        particlesJS("particles-js", {
            particles: {
                number: { value: 80, density: { enable: true, value_area: 800 } },
                color: { value: "#ffffff" },
                shape: { type: "circle" },
                opacity: { value: 0.5, random: false },
                size: { value: 3, random: true },
                line_linked: { enable: true, distance: 150, color: "#ffffff", opacity: 0.4, width: 1 },
                move: { enable: true, speed: 2, direction: "none", random: false, straight: false, out_mode: "out", bounce: false }
            },
            interactivity: {
                detect_on: "canvas",
                events: { onhover: { enable: true, mode: "repulse" }, onclick: { enable: true, mode: "push" }, resize: true },
                modes: { repulse: { distance: 100, duration: 0.4 }, push: { particles_nb: 4 } }
            },
            retina_detect: true
        });
    </script>
</body>
</html>
